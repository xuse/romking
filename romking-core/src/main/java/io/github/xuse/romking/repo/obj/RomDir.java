package io.github.xuse.romking.repo.obj;

import java.sql.Types;
import java.util.Date;
import java.util.List;

import com.github.xuse.querydsl.annotation.AutoGenerated;
import com.github.xuse.querydsl.annotation.CustomType;
import com.github.xuse.querydsl.annotation.GeneratedType;
import com.github.xuse.querydsl.annotation.dbdef.ColumnSpec;
import com.github.xuse.querydsl.annotation.dbdef.Key;
import com.github.xuse.querydsl.annotation.dbdef.TableSpec;
import com.github.xuse.querydsl.datatype.JSONObjectType;
import com.github.xuse.querydsl.sql.ddl.ConstraintType;

import io.github.xuse.jetui.annotation.ViewColumn;
import io.github.xuse.romking.core.Platform;
import io.github.xuse.romking.repo.enums.RepoType;
import lombok.Data;

@Data
@TableSpec(name = "rom_repo",primaryKeys = "id",keys = {
		@Key(type=ConstraintType.UNIQUE,path = {"label","rootpath"}),
		@Key(type=ConstraintType.KEY,path = {"label","platform"}),
})
public class RomDir {
	@ColumnSpec(nullable = false, autoIncrement = true,type=Types.INTEGER)
    private int id;
	
	/**
	 * 位于哪个存储设备
	 */
	@ViewColumn(caption="仓库")
	@ColumnSpec(size=64)
    private String label;
	
	/**
	 * 平台分类
	 */
	@ViewColumn(caption="平台")
	@ColumnSpec(type=Types.VARCHAR,size=10,nullable = false)
	private Platform platform;
	
	/**
	 * 在设备上的目录
	 */
	@ViewColumn(caption="路径")
	@ColumnSpec(size=64,nullable = false)
    private String rootpath;

	/**
	 * 注释说明
	 */
    @ColumnSpec(nullable=false,defaultValue = "''")
    private String description;
    
    /**
     * 类型
     */
    @ViewColumn(caption="类型")
    @ColumnSpec(nullable=false)
    private RepoType type;
	
	/**
	 * 创建时间
	 */
	@ColumnSpec(nullable = false)
	@AutoGenerated(GeneratedType.CREATED_TIMESTAMP)
	@ViewColumn(caption="创建时间")
    private Date createTime;
	
	/**
	 * 最后一次扫描时间
	 */
	@ColumnSpec(nullable = true)
	@ViewColumn(caption="扫描时间")
	private Date lastScan;
	
	/**
	 * 标签
	 */
	@ColumnSpec(nullable = true,type=Types.VARCHAR,size=64)
	@CustomType(JSONObjectType.class)
	private List<String> tags;
}
